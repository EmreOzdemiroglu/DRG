# Community Report Structure - GraphRAG Style

## Overview

Community reports provide high-level summaries of knowledge graph clusters (communities). These reports follow GraphRAG-style structure and are designed to be algorithm-agnostic, working with clusters generated by any clustering algorithm.

## Report Structure

Each community report contains:

### 1. Cluster Summary

A brief textual summary describing:
- Number of entities in the cluster
- Dominant entity types
- Number of internal relationships
- Most common relationship patterns

**Purpose**: Quick overview of cluster composition and characteristics.

**Example**: "Cluster 1 contains 45 entities primarily of type 'Person' with 120 internal relationships. The most common relationship type is 'collaborates_with'."

### 2. Top Actors

List of entities with most connections within the cluster:
- Entity identifier
- Connection count (degree centrality within cluster)
- Sorted by importance (connection count)

**Purpose**: Identify key entities that play central roles in the cluster.

**Format**: List of (entity_id, connection_count) tuples.

**Example**:
- Alice: 15 connections
- Bob: 12 connections
- Charlie: 10 connections

### 3. Top Relationships

List of most common relationship types within the cluster:
- Relationship type
- Occurrence count
- Sorted by frequency

**Purpose**: Understand relationship patterns and dynamics within the cluster.

**Format**: List of (relationship_type, count) tuples.

**Example**:
- collaborates_with: 25 occurrences
- influences: 18 occurrences
- works_with: 12 occurrences

### 4. Themes

Identified themes or characteristics of the cluster:
- Based on entity types
- Based on relationship patterns
- Based on cluster density/cohesion

**Purpose**: Provide semantic characterization of the cluster.

**Examples**:
- "Person-centric"
- "collaboration networks"
- "highly connected"
- "spatial networks"

### 5. Metadata

Additional cluster information:
- Node count
- Edge count
- Density (edge_count / possible_edges)
- Custom metadata from clustering algorithm

**Purpose**: Quantitative metrics for cluster analysis.

## Algorithm-Agnostic Design

### Cluster Input Format

Clusters are defined as:
- **id**: Unique cluster identifier
- **node_ids**: Set of node identifiers belonging to cluster
- **metadata**: Optional additional information from clustering algorithm

### No Clustering Implementation

The report generator:
- Does NOT implement clustering algorithms
- Accepts clusters as input (from external clustering)
- Works with any clustering method:
  - Louvain
  - Leiden
  - Spectral clustering
  - Custom algorithms

### Benefits

- **Flexibility**: Use best clustering algorithm for each dataset
- **Modularity**: Clustering and reporting are separate concerns
- **Extensibility**: Easy to add new clustering methods
- **Testing**: Can test reports with manually defined clusters

## Report Generation Process

1. **Cluster Input**: Receive cluster definition
2. **Entity Analysis**: Analyze entities in cluster (types, properties)
3. **Relationship Analysis**: Analyze relationships within cluster
4. **Pattern Extraction**: Identify relationship patterns
5. **Theme Identification**: Derive themes from analysis
6. **Summary Generation**: Create textual summary
7. **Report Assembly**: Combine all components

## Export Formats

### JSON Format
Structured JSON for programmatic access:
```json
{
  "cluster_id": "cluster_1",
  "summary": "...",
  "top_actors": [...],
  "top_relationships": [...],
  "themes": [...],
  "metadata": {...}
}
```

### Text Format
Human-readable text report for:
- Documentation
- Manual review
- Presentation

## Use Cases

### Long-Text Analysis
- Summarize communities in large documents
- Identify key characters/entities
- Understand relationship patterns

### Multi-Dataset Comparison
- Compare cluster structures across datasets
- Identify common themes
- Understand dataset-specific patterns

### Explainable Graph Analysis
- Human-readable summaries
- Traceable to source clusters
- Support decision-making

## Theme Identification

Themes are identified through:

### Entity Type Analysis
- Dominant entity types → "Person-centric", "Location-centric"

### Relationship Pattern Analysis
- Common relationship types → "collaboration networks", "influence networks"

### Graph Structure Analysis
- Density → "highly connected", "loosely connected"
- Centrality patterns → "hub-based", "distributed"

### Future Enhancements
- LLM-based theme generation
- Semantic similarity for theme clustering
- Domain-specific theme taxonomies

## Example Report

```
======================================================================
Community Report: cluster_1
======================================================================

Summary:
  Cluster cluster_1 contains 45 entities primarily of type 'Person'
  with 120 internal relationships. The most common relationship type
  is 'collaborates_with'.

Top Actors:
  - Alice: 15 connections
  - Bob: 12 connections
  - Charlie: 10 connections
  - Diana: 8 connections

Top Relationships:
  - collaborates_with: 25 occurrences
  - influences: 18 occurrences
  - works_with: 12 occurrences
  - communicates_with: 10 occurrences

Themes:
  - Person-centric
  - collaboration networks
  - highly connected

Metadata:
  - node_count: 45
  - edge_count: 120
  - density: 0.121
======================================================================
```

## Trade-offs

### Advantages
- Algorithm-agnostic (works with any clustering)
- Human-readable summaries
- Quantitative metrics
- Extensible structure

### Limitations
- Summary quality depends on cluster quality
- Theme identification is basic (can be enhanced with LLM)
- No automatic improvement suggestions

## Future Enhancements

Potential improvements:
- LLM-generated summaries (more natural language)
- Comparative reports (across clusters)
- Temporal reports (how clusters change over time)
- Interactive reports (drill-down capabilities)
- Domain-specific report templates





